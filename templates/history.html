{% extends "layout.html" %}

{% block content %}

<div class="container">
    {% if t_history or s_history %}
    <ul class="nav nav-tabs">
        {% if s_history %}
        <li><a data-toggle="tab" href="#s_history">Search History</a></li>
        {% endif %}
        {% if t_history %}
        <li><a data-toggle="tab" href="#t_history">Trading History</a></li>
        {% endif %}
    </ul>
    {% endif %}
    <div class="tab-content">
        {% if s_history %}
        <div id="s_history" class="tab-pane fade">
            <table class="table table-striped table-hover table-responsive">
                <thead>
                    <tr>
                        <th class="text-center" style="width:30%">
                            <h4>Stocks</h4>
                        </th>
                        <th class="text-center" style="width:40%">
                            <h4>Data Requested</h4>
                        </th>
                        <th class="text-center" style="width:10">
                            <h4>Time of Search</h4>
                        </th>
                        <th class="text-center" style="width:10">
                            <h4></h4>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in s_history %}
                    <tr>
                        <td class="text-center"><strong>{{ row[1] }}</strong><br>{{ info[row[1]] }}</td>
                        <td>{{ row[2] }}</td>
                        <td class="text-center">{{ row[4] }}</td>
                        <td class="text-center">
                            <form method="post">
                                <button type="submit" class="btn btn-primary mt-3 glyphicon glyphicon-search"
                                    name="search" value="{{ row[1] }};{{ row[2] }}">Search Again </button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}

                </tbody>
            </table>
        </div>
        {% endif %}
        {% if t_history %}
        <div id="t_history" class="tab-pane fade">
            <table class="table table-striped table-hover table-responsive">
                <thead>
                    <tr>
                        <th class="text-center">
                            <h4>Stocks</h4>
                        </th>
                        <th class="text-center">
                            <h4>Direction</h4>
                        </th>
                        <th class="text-center">
                            <h4>Amount</h4>
                        </th>
                        <th class="text-center">
                            <h4>Traded Price</h4>
                        </th>
                        <th class="text-center">
                            <h4>Entry Time</h4>
                        </th>
                    </tr>
                </thead>

                <tbody>
                    {% for row in t_history %}
                    <tr>
                        <td class="text-center"><strong>{{ row[1] }}</strong></td>
                        <td class="text-center">{{ row[2] }}</td>
                        <td class="text-center">{{ row[3] }}</td>
                        <td class="text-center">{{ row[4] }}</td>
                        <td class="text-center">{{ row[5][:16] }}</td>
                    </tr>
                    {% endfor %}

                </tbody>
            </table>
        </div>
        {% endif %}
    </div>
</div>

{% endblock %}